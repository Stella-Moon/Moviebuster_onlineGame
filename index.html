
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
           <title> Onlineshop - Moviebuster </title>
     <link rel="stylesheet" href="assets/css/index-shop.css">
     <link rel="icon" type="image/png" href="assets/data/favicon.png">
     <script src="assets/js/script.js"> </script>
    
    <script>
// Datenbank 
	
const databaseClient = {
  // Account Daten
  data: {
    url: "https://database-teacher-onlineshop.herokuapp.com/sql",
        group: "al8",
        pw: "31349893",
    sql: ""
  },    
	    
const vorname = document.getElementById("vorname");
const nachname = document.getElementById("nachname");
const email = document.getElementById("email");
const gewinnwahl = document.getElementById("gewinnauswahl");
const submitbutton = document.getElementById("submitbutton");
	    
	    
	   // submitbutton.disabled = true;
	
	    submitbutton.addEventListener('click', validierung);

function validierung(){

			 /* if(email.value == ""){

			document.getElementById('infotext-mail').innerHTML = "Bitte dieses Feld ausfüllen!";
			return false;
			}
			
			else
			{ 
			return true; */
			
	

  // HTTP Request an die Datenbank
  // Mitgegeben wird ein SQL Query als String 
    
  executeSqlQuery: async (sql) => {
    databaseClient.data.sql = sql
    const response = await fetch(databaseClient.data.url, {
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },
      method: "POST",
      body: JSON.stringify(databaseClient.data)
    })
    const result = await response.json()
    console.log("SQL Query executed: ", result, sql)
    
    return result
  },

  // Mitgegeben wird der Name der Tabelle als String, die Felder als Array und die Werte als Array.
  // Beispiel: databaseClient.insertInto("customers", ["firstname", "email"], [firstname.value, email.value])
		
  insertInto: async (tableName = "gameusers", fields =  ["vorname", "nachname, "email", "gewinnwahl"], values = [vorname.value, nachname.value, email.value, gewinnwahl.value]) => {
 
//databaseClient.insertInto("gameusers" ["vorname", "nachname, "email", "gewinnwahl"], [vorname.value, nachname.value, email.value, gewinnwahl.value])
 const sql = `INSERT INTO ${tableName} (${fields.join(",")}) VALUES ("${values.join(",")}")`
    return await databaseClient.executeSqlQuery(sql)
  }
  
  location.href = "game.html";

}
		// }
		
		} ) // Ende validierungs funktion

	</script>


  </head>

  <body>
    
    <header class="flex">
      <img src="assets/data/logo.png" alt="Logo Moviebuster" height="100" href="index.html">
      <h1 class="masterhead"> <a href="index.html" id="masterhead"> Moviebuster </a> </h1>
        <div class="navigation">
        <p> <a class ="navilink" href="shop.html"> Shop </a></p>
      </div>
          </header>

          <div class="index-intro blackbox"> 
<h1> Willkommen bei Moviebuster</h1>
<p> Thor 4 Info, und Moviebuster </p>
          </div>

            
    <main class="zweier-grid">
  
      <div class="blackbox formular"> 
<div class="vorname"> 
  <label> Vorname </label>
  <input type="text" id="vorname"> 
	
</div>

<div class="nachname"> 
  <label> Nachname </label>
  <input type="text" id="nachname"> 
</div>

<div class="email"> 
  <label> E-Mail </label>
  <input type="email" id="email">
	<p id="infotext-mail"> </p>
</div>
	     <div class="gewinnwahl">
		<input name="gewinnauswahl" type="radio" value="filme"> Thor Trilogie (1-3) <br>
		<input name="gewinnauswahl" type="radio" value="kinotickets"> 2 Kinotickets
	    </div>
	      
<button id="submitbutton" onclick="validierung()"> Absenden und Spielen </button> <!-- Button der Sendet Und game page lädt-->
      </div>
	    
	   
      
      <div class="blackbox motivation"> 
        <h3> Motivation </h3>
        <P> User motivation wieso spielen</P> 
      </div>

 
  
    </main>
  
  
  <footer> <p> ©2022 Moviebuster | Linda, Marija, Simona </p> <p> made with<a class ="link" href="https://github.com/"> GitHub</a> </p> </footer>
  


  </body>

</html>


 
